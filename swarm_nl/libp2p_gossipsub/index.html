<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Implementation of the Gossipsub protocol."><title>libp2p_gossipsub - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="libp2p_gossipsub" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0 (aedd173a2 2024-03-17)" data-channel="1.77.0" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../libp2p_gossipsub/index.html">libp2p_gossipsub</a><span class="version">0.46.1</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Aliases</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../libp2p_gossipsub/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">libp2p_gossipsub</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/libp2p_gossipsub/lib.rs.html#21-134">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Implementation of the <a href="https://github.com/libp2p/specs/blob/master/pubsub/gossipsub/README.md">Gossipsub</a> protocol.</p>
<p>Gossipsub is a P2P pubsub (publish/subscription) routing layer designed to extend upon
floodsub and meshsub routing protocols.</p>
<h2 id="overview"><a class="doc-anchor" href="#overview">§</a>Overview</h2>
<p><em>Note: The gossipsub protocol specifications
(<a href="https://github.com/libp2p/specs/tree/master/pubsub/gossipsub">https://github.com/libp2p/specs/tree/master/pubsub/gossipsub</a>) provide an outline for the
routing protocol. They should be consulted for further detail.</em></p>
<p>Gossipsub  is a blend of meshsub for data and randomsub for mesh metadata. It provides bounded
degree and amplification factor with the meshsub construction and augments it using gossip
propagation of metadata with the randomsub technique.</p>
<p>The router maintains an overlay mesh network of peers on which to efficiently send messages and
metadata.  Peers use control messages to broadcast and request known messages and
subscribe/unsubscribe from topics in the mesh network.</p>
<h2 id="important-discrepancies"><a class="doc-anchor" href="#important-discrepancies">§</a>Important Discrepancies</h2>
<p>This section outlines the current implementation’s potential discrepancies from that of other
implementations, due to undefined elements in the current specification.</p>
<ul>
<li>
<p><strong>Topics</strong> -  In gossipsub, topics configurable by the <code>hash_topics</code> configuration parameter.
Topics are of type <a href="struct.TopicHash.html" title="struct libp2p_gossipsub::TopicHash"><code>TopicHash</code></a>. The current go implementation uses raw utf-8 strings, and this
is default configuration in rust-libp2p. Topics can be hashed (SHA256 hashed then base64
encoded) by setting the <code>hash_topics</code> configuration parameter to true.</p>
</li>
<li>
<p><strong>Sequence Numbers</strong> - A message on the gossipsub network is identified by the source
<a href="../libp2p_identity/peer_id/struct.PeerId.html" title="struct libp2p_identity::peer_id::PeerId"><code>PeerId</code></a> and a nonce (sequence number) of the message. The sequence numbers in
this implementation are sent as raw bytes across the wire. They are 64-bit big-endian unsigned
integers. When messages are signed, they are monotonically increasing integers starting from a
random value and wrapping around u64::MAX. When messages are unsigned, they are chosen at random.
NOTE: These numbers are sequential in the current go implementation.</p>
</li>
</ul>
<h2 id="peer-discovery"><a class="doc-anchor" href="#peer-discovery">§</a>Peer Discovery</h2>
<p>Gossipsub does not provide peer discovery by itself. Peer discovery is the process by which
peers in a p2p network exchange information about each other among other reasons to become resistant
against the failure or replacement of the
<a href="https://docs.libp2p.io/reference/glossary/#boot-node">boot nodes</a> of the network.</p>
<p>Peer
discovery can e.g. be implemented with the help of the <a href="https://github.com/libp2p/specs/blob/master/kad-dht/README.md">Kademlia</a> protocol
in combination with the <a href="https://github.com/libp2p/specs/tree/master/identify">Identify</a> protocol. See the
Kademlia implementation documentation for more information.</p>
<h2 id="using-gossipsub"><a class="doc-anchor" href="#using-gossipsub">§</a>Using Gossipsub</h2><h3 id="gossipsub-config"><a class="doc-anchor" href="#gossipsub-config">§</a>Gossipsub Config</h3>
<p>The <a href="struct.Config.html"><code>Config</code></a> struct specifies various network performance/tuning configuration
parameters. Specifically it specifies:</p>
<p>This struct implements the <a href="https://doc.rust-lang.org/1.77.0/core/default/trait.Default.html" title="trait core::default::Default"><code>Default</code></a> trait and can be initialised via
<a href="struct.Config.html#method.default" title="associated function libp2p_gossipsub::Config::default"><code>Config::default()</code></a>.</p>
<h3 id="behaviour"><a class="doc-anchor" href="#behaviour">§</a>Behaviour</h3>
<p>The <a href="struct.Behaviour.html"><code>Behaviour</code></a> struct implements the <a href="../libp2p_swarm/behaviour/trait.NetworkBehaviour.html" title="trait libp2p_swarm::behaviour::NetworkBehaviour"><code>libp2p_swarm::NetworkBehaviour</code></a> trait allowing it to
act as the routing behaviour in a <a href="../libp2p_swarm/struct.Swarm.html" title="struct libp2p_swarm::Swarm"><code>libp2p_swarm::Swarm</code></a>. This struct requires an instance of
<a href="../libp2p_identity/peer_id/struct.PeerId.html" title="struct libp2p_identity::peer_id::PeerId"><code>PeerId</code></a> and <a href="struct.Config.html"><code>Config</code></a>.</p>
<h3 id="example"><a class="doc-anchor" href="#example">§</a>Example</h3>
<p>For an example on how to use gossipsub, see the <a href="https://github.com/libp2p/rust-libp2p/tree/master/examples/chat">chat-example</a>.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AllowAllSubscriptionFilter.html" title="struct libp2p_gossipsub::AllowAllSubscriptionFilter">AllowAllSubscriptionFilter</a></div><div class="desc docblock-short">Allows all subscriptions</div></li><li><div class="item-name"><a class="struct" href="struct.Behaviour.html" title="struct libp2p_gossipsub::Behaviour">Behaviour</a></div><div class="desc docblock-short">Network behaviour that handles the gossipsub protocol.</div></li><li><div class="item-name"><a class="struct" href="struct.CallbackSubscriptionFilter.html" title="struct libp2p_gossipsub::CallbackSubscriptionFilter">CallbackSubscriptionFilter</a></div></li><li><div class="item-name"><a class="struct" href="struct.CombinedSubscriptionFilters.html" title="struct libp2p_gossipsub::CombinedSubscriptionFilters">CombinedSubscriptionFilters</a></div><div class="desc docblock-short">Combines two subscription filters</div></li><li><div class="item-name"><a class="struct" href="struct.Config.html" title="struct libp2p_gossipsub::Config">Config</a></div><div class="desc docblock-short">Configuration parameters that define the performance of the gossipsub network.</div></li><li><div class="item-name"><a class="struct" href="struct.ConfigBuilder.html" title="struct libp2p_gossipsub::ConfigBuilder">ConfigBuilder</a></div><div class="desc docblock-short">The builder struct for constructing a gossipsub configuration.</div></li><li><div class="item-name"><a class="struct" href="struct.IdentityTransform.html" title="struct libp2p_gossipsub::IdentityTransform">IdentityTransform</a></div><div class="desc docblock-short">The default transform, the raw data is propagated as is to the application layer gossipsub.</div></li><li><div class="item-name"><a class="struct" href="struct.MaxCountSubscriptionFilter.html" title="struct libp2p_gossipsub::MaxCountSubscriptionFilter">MaxCountSubscriptionFilter</a></div><div class="desc docblock-short">Adds a max count to a given subscription filter</div></li><li><div class="item-name"><a class="struct" href="struct.Message.html" title="struct libp2p_gossipsub::Message">Message</a></div><div class="desc docblock-short">The message sent to the user after a <a href="struct.RawMessage.html" title="struct libp2p_gossipsub::RawMessage"><code>RawMessage</code></a> has been transformed by a
<a href="trait.DataTransform.html" title="trait libp2p_gossipsub::DataTransform"><code>crate::DataTransform</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.MessageId.html" title="struct libp2p_gossipsub::MessageId">MessageId</a></div></li><li><div class="item-name"><a class="struct" href="struct.MetricsConfig.html" title="struct libp2p_gossipsub::MetricsConfig">MetricsConfig</a></div></li><li><div class="item-name"><a class="struct" href="struct.PeerScoreParams.html" title="struct libp2p_gossipsub::PeerScoreParams">PeerScoreParams</a></div></li><li><div class="item-name"><a class="struct" href="struct.PeerScoreThresholds.html" title="struct libp2p_gossipsub::PeerScoreThresholds">PeerScoreThresholds</a></div></li><li><div class="item-name"><a class="struct" href="struct.RawMessage.html" title="struct libp2p_gossipsub::RawMessage">RawMessage</a></div><div class="desc docblock-short">A message received by the gossipsub system and stored locally in caches..</div></li><li><div class="item-name"><a class="struct" href="struct.RegexSubscriptionFilter.html" title="struct libp2p_gossipsub::RegexSubscriptionFilter">RegexSubscriptionFilter</a></div><div class="desc docblock-short">A subscription filter that filters topics based on a regular expression.</div></li><li><div class="item-name"><a class="struct" href="struct.Topic.html" title="struct libp2p_gossipsub::Topic">Topic</a></div><div class="desc docblock-short">A gossipsub topic.</div></li><li><div class="item-name"><a class="struct" href="struct.TopicHash.html" title="struct libp2p_gossipsub::TopicHash">TopicHash</a></div></li><li><div class="item-name"><a class="struct" href="struct.TopicScoreParams.html" title="struct libp2p_gossipsub::TopicScoreParams">TopicScoreParams</a></div></li><li><div class="item-name"><a class="struct" href="struct.WhitelistSubscriptionFilter.html" title="struct libp2p_gossipsub::WhitelistSubscriptionFilter">WhitelistSubscriptionFilter</a></div><div class="desc docblock-short">Allows only whitelisted subscriptions</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.ConfigBuilderError.html" title="enum libp2p_gossipsub::ConfigBuilderError">ConfigBuilderError</a></div><div class="desc docblock-short">Error associated with Config building.</div></li><li><div class="item-name"><a class="enum" href="enum.Event.html" title="enum libp2p_gossipsub::Event">Event</a></div><div class="desc docblock-short">Event that can be emitted by the gossipsub behaviour.</div></li><li><div class="item-name"><a class="enum" href="enum.MessageAcceptance.html" title="enum libp2p_gossipsub::MessageAcceptance">MessageAcceptance</a></div><div class="desc docblock-short">Validation kinds from the application for received messages.</div></li><li><div class="item-name"><a class="enum" href="enum.MessageAuthenticity.html" title="enum libp2p_gossipsub::MessageAuthenticity">MessageAuthenticity</a></div><div class="desc docblock-short">Determines if published messages should be signed or not.</div></li><li><div class="item-name"><a class="enum" href="enum.PublishError.html" title="enum libp2p_gossipsub::PublishError">PublishError</a></div><div class="desc docblock-short">Error associated with publishing a gossipsub message.</div></li><li><div class="item-name"><a class="enum" href="enum.SubscriptionError.html" title="enum libp2p_gossipsub::SubscriptionError">SubscriptionError</a></div><div class="desc docblock-short">Error associated with subscribing to a topic.</div></li><li><div class="item-name"><a class="enum" href="enum.ValidationError.html" title="enum libp2p_gossipsub::ValidationError">ValidationError</a></div></li><li><div class="item-name"><a class="enum" href="enum.ValidationMode.html" title="enum libp2p_gossipsub::ValidationMode">ValidationMode</a></div><div class="desc docblock-short">The types of message validation that can be employed by gossipsub.</div></li><li><div class="item-name"><a class="enum" href="enum.Version.html" title="enum libp2p_gossipsub::Version">Version</a></div><div class="desc docblock-short">Selector for custom Protocol Id</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.DataTransform.html" title="trait libp2p_gossipsub::DataTransform">DataTransform</a></div><div class="desc docblock-short">A general trait of transforming a <a href="struct.RawMessage.html" title="struct libp2p_gossipsub::RawMessage"><code>RawMessage</code></a> into a <a href="struct.Message.html" title="struct libp2p_gossipsub::Message"><code>Message</code></a>. The
<a href="struct.RawMessage.html" title="struct libp2p_gossipsub::RawMessage"><code>RawMessage</code></a> is obtained from the wire and the <a href="struct.Message.html" title="struct libp2p_gossipsub::Message"><code>Message</code></a> is used to
calculate the <a href="struct.MessageId.html" title="struct libp2p_gossipsub::MessageId"><code>crate::MessageId</code></a> of the message and is what is sent to the application.</div></li><li><div class="item-name"><a class="trait" href="trait.Hasher.html" title="trait libp2p_gossipsub::Hasher">Hasher</a></div><div class="desc docblock-short">A generic trait that can be extended for various hashing types for a topic.</div></li><li><div class="item-name"><a class="trait" href="trait.TopicSubscriptionFilter.html" title="trait libp2p_gossipsub::TopicSubscriptionFilter">TopicSubscriptionFilter</a></div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.score_parameter_decay.html" title="fn libp2p_gossipsub::score_parameter_decay">score_parameter_decay</a></div><div class="desc docblock-short">Computes the decay factor for a parameter, assuming the <code>decay_interval</code> is 1s
and that the value decays to zero if it drops below 0.01.</div></li><li><div class="item-name"><a class="fn" href="fn.score_parameter_decay_with_base.html" title="fn libp2p_gossipsub::score_parameter_decay_with_base">score_parameter_decay_with_base</a></div><div class="desc docblock-short">Computes the decay factor for a parameter using base as the <code>decay_interval</code>.</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.IdentTopic.html" title="type libp2p_gossipsub::IdentTopic">IdentTopic</a></div></li><li><div class="item-name"><a class="type" href="type.Rpc.html" title="type libp2p_gossipsub::Rpc">Rpc</a><span class="stab deprecated" title="">Deprecated</span></div></li><li><div class="item-name"><a class="type" href="type.Sha256Topic.html" title="type libp2p_gossipsub::Sha256Topic">Sha256Topic</a></div></li></ul></section></div></main></body></html>